---
title: "Conversions: h5Seurat and AnnData"
---

```{r setup, include = FALSE}
python3 <- Sys.which(names = "python3")
library(reticulate)
use_python(python = python3)
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  comment = "#>"
)
# options(SeuratData.repo.use = "https://seurat.nygenome.org")
```

```{r cleanup, echo=FALSE, results='hide'}
outs <- c(
  "pbmc3k.h5Seurat",
  "pbmc3k.h5ad"
)
file.remove(outs)
```

```{r packages}
library(Seurat)
library(SeuratData)
library(SeuratDisk)
```

## Converting from Seurat to AnnData via h5Seurat

```{r get_data}
InstallData("pbmc3k")
data("pbmc3k.final")
pbmc3k.final
```

```{r convert_seurat}
SaveH5Seurat(pbmc3k.final, filename = "pbmc3k.h5Seurat")
Convert("pbmc3k.h5Seurat", dest = "h5ad")
```

```{python load_adata}
import scanpy
adata = scanpy.read_h5ad("pbmc3k.h5ad", backed="r+")
adata
```

## Converting from AnnData to Seurat via h5Seurat

```{r get_adata}

```

```{r convert_adata}

```
